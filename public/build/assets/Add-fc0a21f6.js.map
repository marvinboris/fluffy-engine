{"version":3,"file":"Add-fc0a21f6.js","sources":["../../../resources/ts/src/containers/Backend/Admin/Admins/Add.jsx"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Col, Row } from 'reactstrap';\r\n\r\n// Components\r\nimport Error from '../../../../components/Messages/Error';\r\nimport Feedback from '../../../../components/Messages/Feedback';\r\n\r\nimport Form from '../../../../components/Backend/UI/Form';\r\nimport Save from '../../../../components/Backend/UI/Form/Save';\r\nimport PageTitle from '../../../../components/Backend/UI/Title/PageTitle';\r\nimport Breadcrumb from '../../../../components/Backend/UI/Title/Breadcrumb';\r\n\r\nimport Input from '../../../../components/UI/Input';\r\nimport Preloader from '../../../../components/UI/Preloaders/Preloader';\r\n\r\nimport { getAdmin, postAdmins, patchAdmins, resetAdmins } from '../../../../store/actions/backend/admins';\r\n\r\nconst initialState = {\r\n    name: '',\r\n    phone: '',\r\n    photo: null,\r\n    email: '',\r\n    password: '',\r\n    password_confirmation: '',\r\n\r\n    add: false,\r\n}\r\n\r\nclass Add extends Component {\r\n    state = { ...initialState }\r\n\r\n\r\n\r\n    // Component methods\r\n    saveHandler = e => {\r\n        e.preventDefault();\r\n        if (this.props.edit) this.props.patch(this.props.match.params.id, e.target);\r\n        else this.props.post(e.target);\r\n    }\r\n\r\n    saveAddHandler = () => this.setState({ add: true }, () => this.props.post(document.querySelector('form')))\r\n\r\n    inputChangeHandler = e => {\r\n        const { name, value, files } = e.target;\r\n        if (files) this.readURL(e.target);\r\n        this.setState({ [name]: files ? files[0] : value });\r\n    }\r\n\r\n    readURL = input => {\r\n        if (input.files && input.files[0]) {\r\n            const file = input.files[0];\r\n            const reader = new FileReader();\r\n\r\n            reader.onload = function (e) {\r\n                document.getElementById(`embed-${input.name}`).style.backgroundImage = `url('${e.target.result}')`;\r\n                document.getElementById(`embed-${input.name}`).style.backgroundSize = \"cover\";\r\n                document.getElementById(`embed-${input.name}`).querySelector(\".file-selected\").innerHTML = file.name;\r\n            }\r\n\r\n            reader.readAsDataURL(file); // convert to base64 string\r\n        }\r\n    }\r\n\r\n    fileUpload = () => document.getElementById('photo').click()\r\n\r\n\r\n\r\n    // Lifecycle methods\r\n    componentDidMount() {\r\n        this.props.reset();\r\n        if (this.props.edit) this.props.get(this.props.match.params.id);\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (!prevProps.backend.admins.message && this.props.backend.admins.message && this.props.backend.admins.message.type === 'success' && !this.props.edit) {\r\n            if (this.state.add) this.setState({ ...initialState });\r\n            else this.props.history.push({\r\n                pathname: '/admin/admins',\r\n                state: {\r\n                    message: this.props.backend.admins.message,\r\n                },\r\n            });\r\n        }\r\n        if (!prevProps.backend.admins.admin && this.props.backend.admins.admin) {\r\n            const { backend: { admins: { admin } } } = this.props;\r\n            this.setState({ ...admin });\r\n        }\r\n        if (this.props.edit && !prevProps.backend.admins.message && this.props.backend.admins.message && this.props.backend.admins.message.type === 'success') {\r\n            const { photo } = this.props.backend.admins.admin;\r\n            this.setState({ photo });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.reset();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            content: {\r\n                cms: {\r\n                    pages: { backend: { pages: { admins: { icon, title, add, edit, index, form } } } }\r\n                }\r\n            },\r\n            backend: { admins: { loading, error, message, admin = {} } },\r\n        } = this.props;\r\n        const { name, phone, photo, email, password, password_confirmation } = this.state;\r\n        let content;\r\n\r\n        const errors = <>\r\n            <Error err={error} />\r\n        </>;\r\n\r\n        if (loading) content = <Col xs={12}>\r\n            <Preloader />\r\n        </Col>;\r\n        else content = <>\r\n            <Feedback message={message} />\r\n\r\n            {this.props.edit && <input type=\"hidden\" name=\"_method\" defaultValue=\"PATCH\" />}\r\n\r\n            <Row>\r\n                <div className=\"col-lg-9\">\r\n                    <Row>\r\n                        <Input type=\"text\" className=\"col-lg-6\" onChange={this.inputChangeHandler} value={name} name=\"name\" required label={form.name} />\r\n                        <Input type=\"tel\" className=\"col-lg-6\" addon={<span className=\"text-secondary text-small\">+237</span>} onChange={this.inputChangeHandler} value={phone} name=\"phone\" required label={form.phone} />\r\n                        <Input type=\"password\" className=\"col-lg-6\" onChange={this.inputChangeHandler} value={password} name=\"password\" label={form.password} />\r\n                        <Input type=\"password\" className=\"col-lg-6\" onChange={this.inputChangeHandler} value={password_confirmation} name=\"password_confirmation\" label={form.password_confirmation} />\r\n                        <Input type=\"email\" className=\"col-lg-6\" onChange={this.inputChangeHandler} value={email} name=\"email\" label={form.email} />\r\n                    </Row>\r\n                </div>\r\n\r\n                <div className=\"col-lg-3\">\r\n                    <Input type=\"image\" name=\"photo\" label={form.photo} onClick={this.fileUpload} cms={form} defaultValue={admin.photo} value={photo} />\r\n                </div>\r\n\r\n                <Save edit={this.props.edit} saveAddHandler={this.saveAddHandler} />\r\n            </Row>\r\n        </>;\r\n\r\n\r\n        return <div className='Admins'>\r\n            <PageTitle title={title} subtitle={this.props.edit ? edit : add} icon={icon}>\r\n                <Breadcrumb items={this.props.edit && [{ to: '/admin/admins', content: index }]} main={this.props.edit ? edit : add} />\r\n            </PageTitle>\r\n\r\n            <div className='content'>\r\n                {errors}\r\n                <Form onSubmit={this.saveHandler} icon={icon} title={this.props.edit ? edit : add} list={index} link=\"/admin/admins\" innerClassName=\"row justify-content-center\">\r\n                    <input type=\"file\" id=\"photo\" name=\"photo\" className=\"d-none\" onChange={this.inputChangeHandler} accept=\".png,.jpg,.jpeg\" />\r\n                    {content}\r\n                </Form>\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({ ...state });\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    get: id => dispatch(getAdmin(id)),\r\n    post: data => dispatch(postAdmins(data)),\r\n    patch: (id, data) => dispatch(patchAdmins(id, data)),\r\n    reset: () => dispatch(resetAdmins()),\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Add));"],"names":["initialState","Add","Component","__publicField","name","value","files","input","file","reader","e","prevProps","admin","photo","icon","title","add","edit","index","form","loading","error","message","phone","email","password","password_confirmation","content","errors","jsx","Fragment","Error","Col","Preloader","jsxs","Feedback","Row","Input","Save","PageTitle","Breadcrumb","Form","mapStateToProps","state","mapDispatchToProps","dispatch","id","getAdmin","data","postAdmins","patchAdmins","resetAdmins","Add$1","withRouter","connect"],"mappings":"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"}