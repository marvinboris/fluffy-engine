var q=Object.defineProperty;var O=(n,s,a)=>s in n?q(n,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[s]=a;var c=(n,s,a)=>(O(n,typeof s!="symbol"?s+"":s,a),a);import{w as D,b as I,r as f,j as t,u as P,d as i,F}from"./app-b00405aa.js";import{C as J,I as o}from"./index-7ae38b98.js";import{S as M}from"./index-7233718b.js";import{a as d}from"./projects-0316f481.js";import{a as p}from"./utility-ffe4e05e.js";import"./Input-9e8e60f5.js";import"./index-4cf95d9b.js";import"./index-f2e9d9e3.js";import"./Form-f87cc336.js";import"./index-3e53c142.js";import"./Table-e1f8faea.js";import"./index-0fad0807.js";const C={title:{},description:{},date:"",experience_id:"",technologies:[],github:"",link:"",translate:"en",add:!1};class T extends f.Component{constructor(){super(...arguments);c(this,"state",{...C,isMounted:!1});c(this,"resetState",()=>this.setState({...C}));c(this,"saveAddHandler",()=>p.component.saveAddHandler(this.setState.bind(this),this.props));c(this,"inputChangeHandler",a=>{const{name:h,id:u,checked:g}=a.target;if(h.includes("technologies_check")){let l=[...this.state.technologies];const[,m]=u.split("-");return g?l.push(m):l=l.filter(b=>+b!=+m),this.setState({technologies:l})}return p.component.inputChangeHandler(this.state,this.setState.bind(this))(a)})}componentDidMount(){p.lifecycle.componentDidMount(this.props,this.setState.bind(this))}componentDidUpdate(a){p.lifecycle.componentDidUpdate("projects","project")(a,this.props,this.state,this.setState.bind(this),this.resetState)}componentWillUnmount(){this.props.reset()}render(){const{content:{cms:{pages:{backend:{pages:{projects:{form:a}}}}},languages:h},backend:{projects:{experiences:u=[],technologies:g=[]}}}=this.props,{title:l,description:m,date:b,github:N,link:y,experience_id:S,translate:v,technologies:H}=this.state,x=localStorage.getItem("backend_lang"),k=h.map(e=>t("option",{value:e.abbr,children:e.name},JSON.stringify(e))),_=u.map(e=>P(e,{company:e.company[x]})).sort((e,r)=>e.company.localeCompare(r.company)).map(e=>t("option",{value:e.id,children:e.company},JSON.stringify(e))),j=g.sort((e,r)=>e.name.localeCompare(r.name)).map(e=>{const r=H.find(A=>+A==+e.id)!==void 0;return i("div",{className:"col-6 col-md-4 col-lg-3 col-xl-2",children:[t(J,{type:"switch",id:`technology-${e.id}`,className:"col-md-6",checked:r,name:"technologies_check[]",onChange:this.inputChangeHandler,label:t("span",{className:"text-400",children:e.name})}),r&&t("input",{type:"hidden",name:"technologies[]",defaultValue:+e.id})]},JSON.stringify(e))}),w=i(F,{children:[this.props.edit&&t("input",{type:"hidden",name:"_method",defaultValue:"PATCH"}),i("div",{className:"row",children:[t("div",{className:"col-lg-9",children:t("div",{className:"row",children:h.map(e=>i(f.Fragment,{children:[t(o,{type:"text",id:"title-"+e.abbr,className:"col-12"+(e.abbr===v?"":" d-none"),onChange:this.inputChangeHandler,value:l[e.abbr],name:"title["+e.abbr+"]",required:!0,label:a.title}),t(o,{type:"textarea",id:"description-"+e.abbr,className:"col-12"+(e.abbr===v?"":" d-none"),onChange:this.inputChangeHandler,value:m[e.abbr],name:"description["+e.abbr+"]",required:!0,label:a.description})]},"language-"+e.abbr))})}),t("div",{className:"col-lg-3",children:t(o,{type:"select",name:"translate",label:a.language,onChange:this.inputChangeHandler,value:v,children:k})}),t("div",{className:"col-12 mb-3",children:t("hr",{})}),t("div",{className:"col-lg-9",children:i("div",{className:"row",children:[t(o,{type:"date",className:"col-lg-6",onChange:this.inputChangeHandler,name:"date",value:b,required:!0,label:a.date}),i(o,{type:"select",className:"col-lg-6",name:"experience_id",label:a.experience,onChange:this.inputChangeHandler,required:!0,value:S,children:[t("option",{children:a.select_experience}),_]}),t(o,{type:"url",className:"col-12",onChange:this.inputChangeHandler,name:"github",value:N,required:!0,label:a.github}),t(o,{type:"url",className:"col-12",onChange:this.inputChangeHandler,name:"link",value:y,required:!0,label:a.link}),i("div",{className:"form-group col-12",children:[t("div",{className:"technologies-title",children:a.technologies_title}),t("div",{className:"row",children:j})]})]})}),t(M,{edit:this.props.edit,saveAddHandler:this.saveAddHandler})]})]});return t(p.lifecycle.render,{className:"Projects",props:this.props,state:this.state,resource:"projects",children:w})}}const U=n=>({...n}),V=n=>({get:s=>n(d.show(s)),info:()=>n(d.info()),post:s=>n(d.post(s)),patch:(s,a)=>n(d.patch(s,a)),reset:()=>n(d.reset())}),ee=D(I(U,V)(T));export{ee as default};
//# sourceMappingURL=Add-43edc7f8.js.map
