{"version":3,"file":"cms-0e385d4c.js","sources":["../../../resources/ts/src/store/actions/backend/cms.js"],"sourcesContent":["import * as actionTypes from '../actionTypes';\r\n\r\nconst prefix = '/api/';\r\n\r\nexport const resetCms = () => ({ type: actionTypes.CMS_RESET });\r\nconst cmsStart = () => ({ type: actionTypes.CMS_START });\r\nconst cmsSuccess = data => ({ type: actionTypes.CMS_SUCCESS, ...data });\r\nconst cmsFail = error => ({ type: actionTypes.CMS_FAIL, error });\r\nexport const getCms = () => async (dispatch, getState) => {\r\n    dispatch(cmsStart());\r\n    const { role } = getState().auth;\r\n\r\n    try {\r\n        const token = localStorage.getItem('token');\r\n        const res = await fetch(`${prefix + role}/cms`, {\r\n            headers: {\r\n                Authorization: token\r\n            }\r\n        });\r\n        const resData = await res.json();\r\n        dispatch(cmsSuccess(resData));\r\n    } catch (error) {\r\n        console.log(error);\r\n        dispatch(cmsFail(error));\r\n    }\r\n};\r\n\r\nexport const postCms = data => async (dispatch, getState) => {\r\n    dispatch(cmsStart());\r\n    const { role } = getState().auth;\r\n\r\n    try {\r\n        const token = localStorage.getItem('token');\r\n        const form = new FormData(data);\r\n        const res = await fetch(`${prefix + role}/cms`, {\r\n            method: 'POST',\r\n            body: form,\r\n            headers: {\r\n                Authorization: token\r\n            }\r\n        });\r\n        const resData = await res.json();\r\n        if (res.status === 422) throw new Error(Object.values(resData.errors).join('\\n'));\r\n        else if (res.status !== 200 && res.status !== 201) throw new Error(resData.error.message);\r\n        dispatch(cmsSuccess(resData));\r\n    } catch (error) {\r\n        console.log(error);\r\n        dispatch(cmsFail(error));\r\n    }\r\n};\r\n\r\nexport const patchCms = (id, data) => async (dispatch, getState) => {\r\n    dispatch(cmsStart());\r\n    const { role } = getState().auth;\r\n\r\n    try {\r\n        const token = localStorage.getItem('token');\r\n        const form = new FormData(data);\r\n        const res = await fetch(`${prefix + role}/cms/${id}`, {\r\n            method: 'POST',\r\n            body: form,\r\n            headers: {\r\n                Authorization: token,\r\n            }\r\n        });\r\n        const resData = await res.json();\r\n        if (res.status === 422) throw new Error(Object.values(resData.errors).join('\\n'));\r\n        dispatch(cmsSuccess(resData));\r\n    } catch (error) {\r\n        console.log(error);\r\n        dispatch(cmsFail(error));\r\n    }\r\n};\r\n\r\nexport const deleteCms = id => async (dispatch, getState) => {\r\n    dispatch(cmsStart());\r\n    const { role } = getState().auth;\r\n\r\n    try {\r\n        const page = document.getElementById('table-page').value;\r\n        const show = document.getElementById('table-show').value;\r\n        const search = document.getElementById('table-search').value;\r\n\r\n        const token = localStorage.getItem('token');\r\n        const res = await fetch(`${prefix + role}/cms/${id}?page=${page}&show=${show}&search=${search}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                Authorization: token\r\n            }\r\n        });\r\n        const resData = await res.json();\r\n        if (res.status === 422) throw new Error(Object.values(resData.errors).join('\\n'));\r\n        dispatch(cmsSuccess(resData));\r\n    } catch (error) {\r\n        console.log(error);\r\n        dispatch(cmsFail(error));\r\n    }\r\n};"],"names":["prefix","resetCms","actionTypes.CMS_RESET","cmsStart","actionTypes.CMS_START","cmsSuccess","data","actionTypes.CMS_SUCCESS","cmsFail","error","actionTypes.CMS_FAIL","getCms","dispatch","getState","role","token","resData","patchCms","id","form","res"],"mappings":"2DAEA,MAAMA,EAAS,QAEFC,EAAW,KAAO,CAAE,KAAMC,IACjCC,EAAW,KAAO,CAAE,KAAMC,CAAuB,GACjDC,EAAaC,IAAS,CAAE,KAAMC,EAAyB,GAAGD,CAAI,GAC9DE,EAAUC,IAAU,CAAE,KAAMC,EAAsB,MAAAD,CAAO,GAClDE,EAAS,IAAM,MAAOC,EAAUC,IAAa,CACtDD,EAAST,EAAQ,CAAE,EACnB,KAAM,CAAE,KAAAW,CAAI,EAAKD,EAAQ,EAAG,KAE5B,GAAI,CACA,MAAME,EAAQ,aAAa,QAAQ,OAAO,EAMpCC,EAAU,MALJ,MAAM,MAAM,GAAGhB,EAASc,QAAY,CAC5C,QAAS,CACL,cAAeC,CAClB,CACb,CAAS,GACyB,OAC1BH,EAASP,EAAWW,CAAO,CAAC,CAC/B,OAAQP,EAAP,CACE,QAAQ,IAAIA,CAAK,EACjBG,EAASJ,EAAQC,CAAK,CAAC,CAC1B,CACL,EA0BaQ,EAAW,CAACC,EAAIZ,IAAS,MAAOM,EAAUC,IAAa,CAChED,EAAST,EAAQ,CAAE,EACnB,KAAM,CAAE,KAAAW,CAAI,EAAKD,EAAQ,EAAG,KAE5B,GAAI,CACA,MAAME,EAAQ,aAAa,QAAQ,OAAO,EACpCI,EAAO,IAAI,SAASb,CAAI,EACxBc,EAAM,MAAM,MAAM,GAAGpB,EAASc,SAAYI,IAAM,CAClD,OAAQ,OACR,KAAMC,EACN,QAAS,CACL,cAAeJ,CAClB,CACb,CAAS,EACKC,EAAU,MAAMI,EAAI,OAC1B,GAAIA,EAAI,SAAW,IAAK,MAAM,IAAI,MAAM,OAAO,OAAOJ,EAAQ,MAAM,EAAE,KAAK;AAAA,CAAI,CAAC,EAChFJ,EAASP,EAAWW,CAAO,CAAC,CAC/B,OAAQP,EAAP,CACE,QAAQ,IAAIA,CAAK,EACjBG,EAASJ,EAAQC,CAAK,CAAC,CAC1B,CACL"}