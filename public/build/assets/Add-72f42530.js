var x=Object.defineProperty;var E=(t,a,e)=>a in t?x(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e;var r=(t,a,e)=>(E(t,typeof a!="symbol"?a+"":a,e),e);import{w as F,b as I,r as U,d as m,F as h,j as s,l as g,aE as j}from"./app-297e02ac.js";import{F as B,E as R}from"./index-9f59e246.js";import{F as D}from"./index-84049355.js";import{S as P}from"./index-7257daae.js";import{P as T,B as _}from"./index-c325659d.js";import{I as p}from"./index-db98c2c6.js";import{P as $}from"./index-7f0191b1.js";import{a as q,p as L,b as M,r as V}from"./admins-22ce7b88.js";import"./Form-58a21dac.js";import"./Input-31415e5f.js";/* empty css                  */const u={name:"",phone:"",photo:null,email:"",password:"",password_confirmation:"",add:!1};class z extends U.Component{constructor(){super(...arguments);r(this,"state",{...u});r(this,"saveHandler",e=>{e.preventDefault(),this.props.edit?this.props.patch(this.props.match.params.id,e.target):this.props.post(e.target)});r(this,"saveAddHandler",()=>this.setState({add:!0},()=>this.props.post(document.querySelector("form"))));r(this,"inputChangeHandler",e=>{const{name:n,value:o,files:i}=e.target;i&&this.readURL(e.target),this.setState({[n]:i?i[0]:o})});r(this,"readURL",e=>{if(e.files&&e.files[0]){const n=e.files[0],o=new FileReader;o.onload=function(i){document.getElementById(`embed-${e.name}`).style.backgroundImage=`url('${i.target.result}')`,document.getElementById(`embed-${e.name}`).style.backgroundSize="cover",document.getElementById(`embed-${e.name}`).querySelector(".file-selected").innerHTML=n.name},o.readAsDataURL(n)}});r(this,"fileUpload",()=>document.getElementById("photo").click())}componentDidMount(){this.props.reset(),this.props.edit&&this.props.get(this.props.match.params.id)}componentDidUpdate(e){if(!e.backend.admins.message&&this.props.backend.admins.message&&this.props.backend.admins.message.type==="success"&&!this.props.edit&&(this.state.add?this.setState({...u}):this.props.history.push({pathname:"/admin/admins",state:{message:this.props.backend.admins.message}})),!e.backend.admins.admin&&this.props.backend.admins.admin){const{backend:{admins:{admin:n}}}=this.props;this.setState({...n})}if(this.props.edit&&!e.backend.admins.message&&this.props.backend.admins.message&&this.props.backend.admins.message.type==="success"){const{photo:n}=this.props.backend.admins.admin;this.setState({photo:n})}}componentWillUnmount(){this.props.reset()}render(){const{content:{cms:{pages:{backend:{pages:{admins:{icon:e,title:n,add:o,edit:i,index:c,form:d}}}}}},backend:{admins:{loading:f,error:b,message:y,admin:k={}}}}=this.props,{name:C,phone:v,photo:w,email:H,password:S,password_confirmation:A}=this.state;let l;const N=s(h,{children:s(R,{err:b})});return f?l=s(j,{xs:12,children:s($,{})}):l=m(h,{children:[s(B,{message:y}),this.props.edit&&s("input",{type:"hidden",name:"_method",defaultValue:"PATCH"}),m(g,{children:[s("div",{className:"col-lg-9",children:m(g,{children:[s(p,{type:"text",className:"col-lg-6",onChange:this.inputChangeHandler,value:C,name:"name",required:!0,label:d.name}),s(p,{type:"tel",className:"col-lg-6",addon:s("span",{className:"text-secondary text-small",children:"+237"}),onChange:this.inputChangeHandler,value:v,name:"phone",required:!0,label:d.phone}),s(p,{type:"password",className:"col-lg-6",onChange:this.inputChangeHandler,value:S,name:"password",label:d.password}),s(p,{type:"password",className:"col-lg-6",onChange:this.inputChangeHandler,value:A,name:"password_confirmation",label:d.password_confirmation}),s(p,{type:"email",className:"col-lg-6",onChange:this.inputChangeHandler,value:H,name:"email",label:d.email})]})}),s("div",{className:"col-lg-3",children:s(p,{type:"image",name:"photo",label:d.photo,onClick:this.fileUpload,cms:d,defaultValue:k.photo,value:w})}),s(P,{edit:this.props.edit,saveAddHandler:this.saveAddHandler})]})]}),m("div",{className:"Admins",children:[s(T,{title:n,subtitle:this.props.edit?i:o,icon:e,children:s(_,{items:this.props.edit&&[{to:"/admin/admins",content:c}],main:this.props.edit?i:o})}),m("div",{className:"content",children:[N,m(D,{onSubmit:this.saveHandler,icon:e,title:this.props.edit?i:o,list:c,link:"/admin/admins",innerClassName:"row justify-content-center",children:[s("input",{type:"file",id:"photo",name:"photo",className:"d-none",onChange:this.inputChangeHandler,accept:".png,.jpg,.jpeg"}),l]})]})]})}}const W=t=>({...t}),G=t=>({get:a=>t(q(a)),post:a=>t(L(a)),patch:(a,e)=>t(M(a,e)),reset:()=>t(V())}),ie=F(I(W,G)(z));export{ie as default};
//# sourceMappingURL=Add-72f42530.js.map
