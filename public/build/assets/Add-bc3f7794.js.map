{"version":3,"file":"Add-bc3f7794.js","sources":["../../../resources/ts/src/containers/Backend/Manager/Users/Add.jsx"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n// Components\r\nimport Save from '../../../../components/Backend/UI/Form/Save';\r\n\r\nimport Input from '../../../../components/UI/Input';\r\nimport Preloader from '../../../../components/UI/Preloaders/Preloader';\r\n\r\nimport actions from '../../../../store/actions/backend/users';\r\nimport * as utility from '../utility';\r\n\r\nconst initialState = {\r\n    name: '',\r\n    phone: '',\r\n    photo: null,\r\n    email: '',\r\n    password: '',\r\n    password_confirmation: '',\r\n    role_id: '',\r\n\r\n    add: false,\r\n}\r\n\r\nclass Add extends Component {\r\n    state = { ...initialState, isMounted: false }\r\n\r\n    // Component methods\r\n    resetState = () => this.setState({ ...initialState })\r\n    saveAddHandler = () => utility.add.component.saveAddHandler(this.setState.bind(this), this.props)\r\n    inputChangeHandler = e => utility.add.component.inputChangeHandler(this.state, this.setState.bind(this))(e)\r\n    fileUpload = id => utility.add.component.fileUpload(id)\r\n\r\n    // Lifecycle methods\r\n    componentDidMount() { utility.add.lifecycle.componentDidMount(this.props, this.setState.bind(this)) }\r\n    componentDidUpdate(prevProps) { utility.add.lifecycle.componentDidUpdate('users', 'user')(prevProps, this.props, this.state, this.setState.bind(this), this.resetState) }\r\n    componentWillUnmount() { this.props.reset() }\r\n    render() {\r\n        const {\r\n            content: {\r\n                cms: {\r\n                    pages: { backend: { pages: { users: { form } } } }\r\n                }\r\n            },\r\n            backend: { users: { roles = [], user = {} } },\r\n        } = this.props;\r\n        const { name, phone, photo, email, password, password_confirmation, role_id } = this.state;\r\n\r\n        const rolesOptions = roles.sort((a, b) => a.name.localeCompare(b.name)).map(role => <option key={JSON.stringify(role)} value={role.id}>{role.name}</option>);\r\n\r\n        const content = <>\r\n            {this.props.edit && <input type=\"hidden\" name=\"_method\" defaultValue=\"PATCH\" />}\r\n\r\n            <div className='row'>\r\n                <div className=\"col-lg-9\">\r\n                    <div className='row'>\r\n                        <Input type=\"text\" className=\"col-lg-6\" onChange={this.inputChangeHandler} value={name} name=\"name\" required label={form.name} />\r\n                        <Input type=\"tel\" className=\"col-lg-6\" addon={<span className=\"text-secondary text-small\">+237</span>} onChange={this.inputChangeHandler} value={phone} name=\"phone\" required label={form.phone} />\r\n                        <Input type=\"password\" className=\"col-lg-6\" onChange={this.inputChangeHandler} value={password} name=\"password\" label={form.password} />\r\n                        <Input type=\"password\" className=\"col-lg-6\" onChange={this.inputChangeHandler} value={password_confirmation} name=\"password_confirmation\" label={form.password_confirmation} />\r\n                        <Input type=\"email\" className=\"col-lg-6\" onChange={this.inputChangeHandler} value={email} name=\"email\" label={form.email} />\r\n                        <Input type=\"select\" className=\"col-lg-6\" name=\"role_id\" label={form.role} onChange={this.inputChangeHandler} required value={role_id}>\r\n                            <option>{form.select_role}</option>\r\n                            {rolesOptions}\r\n                        </Input>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-lg-3\">\r\n                    <Input type=\"image\" name=\"photo\" label={form.photo} onClick={() => this.fileUpload('photo')} cms={form} defaultValue={user.photo} value={photo} />\r\n                </div>\r\n\r\n                <Save edit={this.props.edit} saveAddHandler={this.saveAddHandler} />\r\n            </div>\r\n        </>;\r\n\r\n        return <utility.add.lifecycle.render className='Users' props={this.props} state={this.state} resource={'users'}>\r\n            <input type=\"file\" id=\"photo\" name=\"photo\" className=\"d-none\" onChange={this.inputChangeHandler} accept=\".png,.jpg,.jpeg\" />\r\n            {content}\r\n        </utility.add.lifecycle.render>;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({ ...state });\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    get: id => dispatch(actions.show(id)),\r\n    info: () => dispatch(actions.info()),\r\n    post: data => dispatch(actions.post(data)),\r\n    patch: (id, data) => dispatch(actions.patch(id, data)),\r\n    reset: () => dispatch(actions.reset()),\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Add));"],"names":["initialState","Add","Component","__publicField","utility.add","id","prevProps","form","roles","user","name","phone","photo","email","password","password_confirmation","role_id","rolesOptions","a","b","role","jsx","content","jsxs","Fragment","Input","Save","mapStateToProps","state","mapDispatchToProps","dispatch","actions","data","Add$1","withRouter","connect"],"mappings":"snBAaA,MAAMA,EAAe,CACjB,KAAM,GACN,MAAO,GACP,MAAO,KACP,MAAO,GACP,SAAU,GACV,sBAAuB,GACvB,QAAS,GAET,IAAK,EACT,EAEA,MAAMC,UAAYC,EAAAA,SAAU,CAA5B,kCACIC,EAAA,aAAQ,CAAE,GAAGH,EAAc,UAAW,EAAM,GAG5CG,EAAA,kBAAa,IAAM,KAAK,SAAS,CAAE,GAAGH,CAAc,CAAA,GACpDG,EAAA,sBAAiB,IAAMC,EAAY,UAAU,eAAe,KAAK,SAAS,KAAK,IAAI,EAAG,KAAK,KAAK,GAChGD,EAAA,0BAAqB,GAAKC,EAAY,UAAU,mBAAmB,KAAK,MAAO,KAAK,SAAS,KAAK,IAAI,CAAC,EAAE,CAAC,GAC1GD,EAAA,kBAAmBE,GAAAD,EAAY,UAAU,WAAWC,CAAE,GAGtD,mBAAoB,CAAUD,EAAI,UAAU,kBAAkB,KAAK,MAAO,KAAK,SAAS,KAAK,IAAI,CAAC,CAAE,CACpG,mBAAmBE,EAAW,CAAEF,EAAY,UAAU,mBAAmB,QAAS,MAAM,EAAEE,EAAW,KAAK,MAAO,KAAK,MAAO,KAAK,SAAS,KAAK,IAAI,EAAG,KAAK,UAAU,CAAE,CACxK,sBAAuB,CAAE,KAAK,MAAM,OAAQ,CAC5C,QAAS,CACC,KAAA,CACF,QAAS,CACL,IAAK,CACD,MAAO,CAAE,QAAS,CAAE,MAAO,CAAE,MAAO,CAAE,KAAAC,CAAO,CAAA,EAAI,CACrD,CACJ,EACA,QAAS,CAAE,MAAO,CAAE,MAAAC,EAAQ,CAAA,EAAI,KAAAC,EAAO,CAAA,EAAK,CAAA,EAC5C,KAAK,MACH,CAAE,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,sBAAAC,EAAuB,QAAAC,CAAQ,EAAI,KAAK,MAE/EC,EAAeT,EAAM,KAAK,CAACU,EAAGC,IAAMD,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAC,EAAE,IAAYC,GAAAC,EAAC,SAAkC,CAAA,MAAOD,EAAK,GAAK,SAAKA,EAAA,IAAA,EAA5C,KAAK,UAAUA,CAAI,CAA8B,CAAS,EAErJE,EACDC,EAAAC,EAAA,CAAA,SAAA,CAAK,KAAA,MAAM,MAASH,EAAA,QAAA,CAAM,KAAK,SAAS,KAAK,UAAU,aAAa,OAAQ,CAAA,EAE7EE,EAAC,MAAI,CAAA,UAAU,MACX,SAAA,CAAAF,EAAC,OAAI,UAAU,WACX,SAACE,EAAA,MAAA,CAAI,UAAU,MACX,SAAA,CAAAF,EAACI,GAAM,KAAK,OAAO,UAAU,WAAW,SAAU,KAAK,mBAAoB,MAAOf,EAAM,KAAK,OAAO,SAAQ,GAAC,MAAOH,EAAK,KAAM,EAC/Hc,EAACI,EAAM,CAAA,KAAK,MAAM,UAAU,WAAW,MAAOJ,EAAC,OAAK,CAAA,UAAU,4BAA4B,SAAA,OAAI,EAAS,SAAU,KAAK,mBAAoB,MAAOV,EAAO,KAAK,QAAQ,SAAQ,GAAC,MAAOJ,EAAK,KAAO,CAAA,EAChMc,EAAAI,EAAA,CAAM,KAAK,WAAW,UAAU,WAAW,SAAU,KAAK,mBAAoB,MAAOX,EAAU,KAAK,WAAW,MAAOP,EAAK,SAAU,EACrIc,EAAAI,EAAA,CAAM,KAAK,WAAW,UAAU,WAAW,SAAU,KAAK,mBAAoB,MAAOV,EAAuB,KAAK,wBAAwB,MAAOR,EAAK,sBAAuB,EAC5Kc,EAAAI,EAAA,CAAM,KAAK,QAAQ,UAAU,WAAW,SAAU,KAAK,mBAAoB,MAAOZ,EAAO,KAAK,QAAQ,MAAON,EAAK,MAAO,IACzHkB,EAAM,CAAA,KAAK,SAAS,UAAU,WAAW,KAAK,UAAU,MAAOlB,EAAK,KAAM,SAAU,KAAK,mBAAoB,SAAQ,GAAC,MAAOS,EAC1H,SAAA,CAACK,EAAA,SAAA,CAAQ,WAAK,WAAY,CAAA,EACzBJ,CAAA,EACL,CAAA,CAAA,CACJ,CACJ,CAAA,EAEAI,EAAC,MAAI,CAAA,UAAU,WACX,SAAAA,EAACI,EAAM,CAAA,KAAK,QAAQ,KAAK,QAAQ,MAAOlB,EAAK,MAAO,QAAS,IAAM,KAAK,WAAW,OAAO,EAAG,IAAKA,EAAM,aAAcE,EAAK,MAAO,MAAOG,CAAA,CAAO,CACpJ,CAAA,EAEAS,EAACK,GAAK,KAAM,KAAK,MAAM,KAAM,eAAgB,KAAK,eAAgB,CAAA,EACtE,CACJ,CAAA,CAAA,EAEA,OAAQH,EAAAnB,EAAY,UAAU,OAAtB,CAA6B,UAAU,QAAQ,MAAO,KAAK,MAAO,MAAO,KAAK,MAAO,SAAU,QACnG,SAAA,CAAAiB,EAAC,QAAM,CAAA,KAAK,OAAO,GAAG,QAAQ,KAAK,QAAQ,UAAU,SAAS,SAAU,KAAK,mBAAoB,OAAO,kBAAkB,EACzHC,CACL,CAAA,CAAA,CACJ,CACJ,CAEA,MAAMK,EAAkBC,IAAU,CAAE,GAAGA,CAAM,GAEvCC,EAAkCC,IAAA,CACpC,IAAWzB,GAAAyB,EAASC,EAAQ,KAAK1B,CAAE,CAAC,EACpC,KAAM,IAAMyB,EAASC,EAAQ,MAAM,EACnC,KAAcC,GAAAF,EAASC,EAAQ,KAAKC,CAAI,CAAC,EACzC,MAAO,CAAC3B,EAAI2B,IAASF,EAASC,EAAQ,MAAM1B,EAAI2B,CAAI,CAAC,EACrD,MAAO,IAAMF,EAASC,EAAQ,OAAO,CACzC,GAEeE,EAAAC,EAAWC,EAAQR,EAAiBE,CAAkB,EAAE5B,CAAG,CAAC"}