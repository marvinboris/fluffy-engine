{"version":3,"file":"admins-22ce7b88.js","sources":["../../../resources/ts/src/store/actions/backend/admins.js"],"sourcesContent":["import * as actionTypes from '../actionTypes';\r\n\r\nconst prefix = '/api/';\r\n\r\nexport const resetAdmins = () => ({ type: actionTypes.ADMINS_RESET });\r\nconst adminsStart = () => ({ type: actionTypes.ADMINS_START });\r\nconst adminsSuccess = data => ({ type: actionTypes.ADMINS_SUCCESS, ...data });\r\nconst adminsFail = error => ({ type: actionTypes.ADMINS_FAIL, error });\r\nexport const getAdmins = (page = 1, show = 10, search = '') => async (dispatch, getState) => {\r\n    dispatch(adminsStart());\r\n    const { role } = getState().auth;\r\n\r\n    try {\r\n        const token = localStorage.getItem('token');\r\n        const res = await fetch(`${prefix + role}/admins?page=${page}&show=${show}&search=${search}`, {\r\n            headers: {\r\n                Authorization: token\r\n            }\r\n        });\r\n        const resData = await res.json();\r\n        dispatch(adminsSuccess(resData));\r\n    } catch (error) {\r\n        console.log(error);\r\n        dispatch(adminsFail(error));\r\n    }\r\n};\r\n\r\nexport const getAdmin = id => async (dispatch, getState) => {\r\n    dispatch(adminsStart());\r\n    const { role } = getState().auth;\r\n\r\n    try {\r\n        const token = localStorage.getItem('token');\r\n        const res = await fetch(`${prefix + role}/admins/${id}`, {\r\n            headers: {\r\n                Authorization: token\r\n            }\r\n        });\r\n        const resData = await res.json();\r\n        dispatch(adminsSuccess(resData));\r\n    } catch (error) {\r\n        console.log(error);\r\n        dispatch(adminsFail(error));\r\n    }\r\n};\r\n\r\nexport const postAdmins = data => async (dispatch, getState) => {\r\n    dispatch(adminsStart());\r\n    const { role } = getState().auth;\r\n\r\n    try {\r\n        const token = localStorage.getItem('token');\r\n        const form = new FormData(data);\r\n        const res = await fetch(`${prefix + role}/admins`, {\r\n            method: 'POST',\r\n            body: form,\r\n            headers: {\r\n                Authorization: token\r\n            }\r\n        });\r\n        const resData = await res.json();\r\n        if (res.status === 422) throw new Error(Object.values(resData.errors).join('\\n'));\r\n        else if (res.status !== 200 && res.status !== 201) throw new Error(resData.error.message);\r\n        dispatch(adminsSuccess(resData));\r\n    } catch (error) {\r\n        console.log(error);\r\n        dispatch(adminsFail(error));\r\n    }\r\n};\r\n\r\nexport const patchAdmins = (id, data) => async (dispatch, getState) => {\r\n    dispatch(adminsStart());\r\n    const { role } = getState().auth;\r\n\r\n    try {\r\n        const token = localStorage.getItem('token');\r\n        const form = new FormData(data);\r\n        const res = await fetch(`${prefix + role}/admins/${id}`, {\r\n            method: 'POST',\r\n            body: form,\r\n            headers: {\r\n                Authorization: token,\r\n            }\r\n        });\r\n        const resData = await res.json();\r\n        if (res.status === 422) throw new Error(Object.values(resData.errors).join('\\n'));\r\n        dispatch(adminsSuccess(resData));\r\n    } catch (error) {\r\n        console.log(error);\r\n        dispatch(adminsFail(error));\r\n    }\r\n};\r\n\r\nexport const deleteAdmins = id => async (dispatch, getState) => {\r\n    dispatch(adminsStart());\r\n    const { role } = getState().auth;\r\n\r\n    try {\r\n        const page = document.getElementById('table-page').value;\r\n        const show = document.getElementById('table-show').value;\r\n        const search = document.getElementById('table-search').value;\r\n\r\n        const token = localStorage.getItem('token');\r\n        const res = await fetch(`${prefix + role}/admins/${id}?page=${page}&show=${show}&search=${search}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                Authorization: token\r\n            }\r\n        });\r\n        const resData = await res.json();\r\n        if (res.status === 422) throw new Error(Object.values(resData.errors).join('\\n'));\r\n        dispatch(adminsSuccess(resData));\r\n    } catch (error) {\r\n        console.log(error);\r\n        dispatch(adminsFail(error));\r\n    }\r\n};"],"names":["prefix","resetAdmins","actionTypes.ADMINS_RESET","adminsStart","actionTypes.ADMINS_START","adminsSuccess","data","actionTypes.ADMINS_SUCCESS","adminsFail","error","actionTypes.ADMINS_FAIL","getAdmins","page","show","search","dispatch","getState","role","token","resData","getAdmin","id","postAdmins","form","res","patchAdmins","deleteAdmins"],"mappings":"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"}